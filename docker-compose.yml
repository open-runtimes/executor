# WARNING!
# This is a development version of THE Appwrite docker-compose.yml file.
# Avoid using this file in your production environment.
# We're exposing here sensitive ports and mounting code volumes for rapid development and debugging of the server stack.

version: '3'

services:
  openruntimes-executor:
    container_name: openruntimes-executor
    stop_signal: SIGINT
    build:
      context: .
    networks:
      runtimes:
    ports:
      - 9509:80
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - appwrite-functions:/storage/functions:rw
      - appwrite-builds:/storage/builds:rw
      - /tmp:/tmp:rw
    environment:
      - _APP_ENV
      - _APP_FUNCTIONS_TIMEOUT
      - _APP_FUNCTIONS_BUILD_TIMEOUT
      - _APP_FUNCTIONS_CONTAINERS
      - _APP_FUNCTIONS_RUNTIMES
      - _APP_FUNCTIONS_CPUS
      - _APP_FUNCTIONS_MEMORY
      - _APP_FUNCTIONS_MEMORY_SWAP
      - _APP_EXECUTOR_SECRET
      - _APP_EXECUTOR_RUNTIME_NETWORK
      - _APP_LOGGING_PROVIDER
      - _APP_LOGGING_CONFIG
      - DOCKERHUB_PULL_USERNAME
      - DOCKERHUB_PULL_PASSWORD
      - OPENRUNTIMES_INACTIVE_THRESHOLD

networks:
  gateway:
  runtimes:

volumes:
  appwrite-functions:
  appwrite-builds: